# í”Œë«í¼ ë°ì´í„° ì—°ë™ â€” ì…‹ì—… ê°€ì´ë“œ

> ì´ ë¬¸ì„œëŠ” ì™¸ë¶€ ê´‘ê³ /ë¶„ì„ í”Œë«í¼ ì—°ë™ì„ ì‹¤ì œë¡œ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ **ê°œë°œì(ë˜ëŠ” ê´€ë¦¬ì)ê°€ ì§ì ‘ ì¤€ë¹„í•´ì•¼ í•  í•­ëª©**ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (`.env.local`)

ì•„ë˜ ë³€ìˆ˜ë¥¼ `.env.local`ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.  
ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë³€ìˆ˜ëŠ” ê±´ë“œë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.

```bash
# â”€â”€ ê¸°ì¡´ (ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆì„ ê²ƒ) â”€â”€
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOi...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOi...

# â”€â”€ ìƒˆë¡œ ì¶”ê°€ â”€â”€

# ì•± URL
# Â· ë¡œì»¬: ì•„ë˜ì²˜ëŸ¼ localhost ìœ ì§€ (.env.local)
# Â· Vercel ë°°í¬: ëŒ€ì‹œë³´ë“œì—ì„œ ë³„ë„ ì„¤ì • (ì•„ë˜ "ë¡œì»¬ vs ë°°í¬" ì°¸ê³ )
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Vercel Cron ë³´ì•ˆ í† í° (ì•„ë¬´ ëœë¤ ë¬¸ìì—´)
# Vercel ëŒ€ì‹œë³´ë“œ > Settings > Environment Variablesì—ë„ ë™ì¼í•˜ê²Œ ì„¤ì •
CRON_SECRET=my-super-secret-cron-token-12345

# â”€â”€ Meta Ads (Facebook/Instagram) â”€â”€
META_APP_ID=               # Facebook Developer App ID
META_APP_SECRET=           # Facebook Developer App Secret

# â”€â”€ Google Ads + GA4 â”€â”€
GOOGLE_CLIENT_ID=          # Google Cloud Console OAuth 2.0 Client ID
GOOGLE_CLIENT_SECRET=      # Google Cloud Console OAuth 2.0 Client Secret

# â”€â”€ Google Gemini AI (ë³´ê³ ì„œ ìë™ ìƒì„±) â”€â”€
GEMINI_API_KEY=            # Google AI Studioì—ì„œ ë°œê¸‰
```

### 1-1. ë¡œì»¬ vs Vercel ë°°í¬ â€” `NEXT_PUBLIC_APP_URL` êµ¬ë¶„

| í™˜ê²½ | ì„¤ì • ìœ„ì¹˜ | ê°’ |
|------|------------|-----|
| **ë¡œì»¬** | í”„ë¡œì íŠ¸ ë£¨íŠ¸ `.env.local` | `NEXT_PUBLIC_APP_URL=http://localhost:3000` |
| **Vercel (ë°°í¬)** | Vercel ëŒ€ì‹œë³´ë“œ â†’ í”„ë¡œì íŠ¸ â†’ **Settings** â†’ **Environment Variables** | `NEXT_PUBLIC_APP_URL=https://www.onemarketing.kr` |

**Vercelì—ì„œ ì„¤ì • ë°©ë²•:**
1. [Vercel Dashboard](https://vercel.com/dashboard) â†’ í•´ë‹¹ í”„ë¡œì íŠ¸ ì„ íƒ
2. **Settings** â†’ **Environment Variables**
3. **Key**: `NEXT_PUBLIC_APP_URL`  
   **Value**: `https://www.onemarketing.kr`  
   (í”„ë¡œí† ì½œ í¬í•¨, ëì— ìŠ¬ë˜ì‹œ ì—†ìŒ)
4. **Environment**: Production(í•„ìˆ˜), PreviewëŠ” í•„ìš” ì‹œ ì²´í¬
5. ì €ì¥ í›„ ë‹¤ìŒ ë°°í¬ë¶€í„° ì ìš© (ì´ë¯¸ ë°°í¬ëœ ê±´ **Redeploy** í•´ì•¼ ë°˜ì˜)

ì´ë ‡ê²Œ í•˜ë©´ **ë¡œì»¬**ì—ì„œëŠ” `http://localhost:3000`ìœ¼ë¡œ OAuth ì½œë°±Â·API ê¸°ì¤€ URLì´ ì¡íˆê³ , **ë°°í¬(www.onemarketing.kr)** ì—ì„œëŠ” `https://www.onemarketing.kr`ë¡œ ì¡í™ë‹ˆë‹¤. Meta/Google OAuth ì•±ì˜ "ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI"ì—ëŠ” **ë‘ URL ëª¨ë‘** ë“±ë¡í•´ ë‘ì–´ì•¼ ë¡œì»¬Â·ë°°í¬ ë‘˜ ë‹¤ ë¡œê·¸ì¸ë©ë‹ˆë‹¤.

---

## 2. Supabase SQL ë§ˆì´ê·¸ë ˆì´ì…˜

ì•„ì§ ì‹¤í–‰í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ì•„ë˜ íŒŒì¼ì˜ SQLì„ Supabase SQL Editorì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤:

ğŸ“„ **íŒŒì¼ ê²½ë¡œ:** `supabase/sql/04-migrations/001-add-contact-fields.sql`

ì´ SQLì— ì´ë¯¸ í¬í•¨ëœ í•­ëª©:
- `data_integrations` í…Œì´ë¸” (ì—°ë™ ì •ë³´ ì €ì¥)
- `integration_sync_logs` í…Œì´ë¸” (ë™ê¸°í™” ë¡œê·¸)
- `platform_metrics` í…Œì´ë¸” (ìˆ˜ì§‘ëœ ì§€í‘œ)
- ê° í…Œì´ë¸”ì— ëŒ€í•œ RLS ì •ì±…
- ì¸ë±ìŠ¤
- `updated_at` íŠ¸ë¦¬ê±°

> âš ï¸ ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆë‹¤ë©´ `DROP POLICY IF EXISTS`ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì¬ì‹¤í–‰í•´ë„ ì•ˆì „í•©ë‹ˆë‹¤.

ì‹¤í–‰ í›„, ë°˜ë“œì‹œ **PostgREST ìŠ¤í‚¤ë§ˆ ìºì‹œë¥¼ ë¦¬ë¡œë“œ**í•˜ì„¸ìš”:
```sql
NOTIFY pgrst, 'reload schema';
```

---

## 2-2. í•œ ë²ˆë§Œ vs ê³ ê°(í´ë¼ì´ì–¸íŠ¸)ë§ˆë‹¤ â€” ê¼­ êµ¬ë¶„í•´ì„œ ë³´ê¸°

**ê³ ê°ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ Meta ì•±Â·Google í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤.**

| êµ¬ë¶„ | í•œ ë²ˆë§Œ (SaaS ìš´ì˜ì = ë‹¹ì‹ ) | ê³ ê°(í´ë¼ì´ì–¸íŠ¸) ì¶”ê°€ë  ë•Œë§ˆë‹¤ |
|------|-----------------------------|--------------------------------|
| **Meta** | Meta ì•± **1ê°œ** ìƒì„± â†’ `META_APP_ID`, `META_APP_SECRET`ì„ `.env`ì— **1ì„¸íŠ¸**ë§Œ ì„¤ì • | í•´ë‹¹ ê³ ê°(í´ë¼ì´ì–¸íŠ¸) ìƒì„¸ â†’ ë°ì´í„° ì—°ë™ì—ì„œ **"Meta OAuth" ë²„íŠ¼** í´ë¦­ â†’ ê³ ê°(ë˜ëŠ” ëŒ€í–‰ì‚¬)ì´ ìê¸° Facebookìœ¼ë¡œ ë¡œê·¸ì¸í•´ ì—°ê²°. **ì•±ì„ ë˜ ë§Œë“œëŠ” ì‘ì—… ì—†ìŒ** |
| **Google** | Google Cloudì—ì„œ OAuth í´ë¼ì´ì–¸íŠ¸ **1ê°œ** ìƒì„± â†’ `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`ì„ `.env`ì— **1ì„¸íŠ¸**ë§Œ ì„¤ì • | í•´ë‹¹ ê³ ê° ìƒì„¸ â†’ ë°ì´í„° ì—°ë™ì—ì„œ **"Google OAuth" ë²„íŠ¼** í´ë¦­ â†’ ê³ ê°ì´ ìê¸° Googleë¡œ ë¡œê·¸ì¸í•´ ì—°ê²°. **í”„ë¡œì íŠ¸/í´ë¼ì´ì–¸íŠ¸ IDë¥¼ ë˜ ë§Œë“œëŠ” ì‘ì—… ì—†ìŒ** |
| **ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³ ** | (ë„¤ì´ë²„ëŠ” â€œì•±â€ ê°œë… ì—†ìŒ. ë¼ì´ì„ ìŠ¤ë§Œ ë°œê¸‰) | ê·¸ **ê³ ê°(ë˜ëŠ” ê·¸ ê³ ê°ì˜ ê²€ìƒ‰ê´‘ê³  ê³„ì •)** ì´ ë„¤ì´ë²„ì—ì„œ API ë¼ì´ì„ ìŠ¤ 1ê°œ ë°œê¸‰ â†’ ê´€ë¦¬ìê°€ ê·¸ í´ë¼ì´ì–¸íŠ¸ì˜ ë°ì´í„° ì—°ë™ íƒ­ì— **API Key, Secret Key, Customer IDë§Œ ì…ë ¥** |

**ì •ë¦¬**

- **Meta / Google**: ìœ„ í‘œì˜ â€œí•œ ë²ˆë§Œâ€ ì‘ì—…ì„ ëë‚´ ë‘ë©´, ì´í›„ì—ëŠ” **ê³ ê° ì¶”ê°€ ì‹œ ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ OAuth ë²„íŠ¼ë§Œ ëˆŒëŸ¬ì„œ ì—°ê²°**í•˜ë©´ ë©ë‹ˆë‹¤. ìƒˆ ì•±Â·ìƒˆ í”„ë¡œì íŠ¸ëŠ” ë§Œë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤.
- **ë„¤ì´ë²„**: ê³ ê°(ë˜ëŠ” í•´ë‹¹ ê²€ìƒ‰ê´‘ê³  ê³„ì • ê¶Œí•œì)ì´ ë¼ì´ì„ ìŠ¤ 1ê°œ ë°œê¸‰ â†’ ë°œê¸‰ë°›ì€ 3ê°œ ê°’ë§Œ í¬í„¸ì— ì…ë ¥í•˜ëŠ” ì‘ì—…ì´ **ê³ ê°ë‹¹ 1ë²ˆ**ì…ë‹ˆë‹¤.

---

## 3. í”Œë«í¼ë³„ ì‚¬ì „ ì¤€ë¹„

### 3-1. ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³  (ê°€ì¥ ê°„ë‹¨, OAuth ë¶ˆí•„ìš”)

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°œê¸‰ ìœ„ì¹˜** | [ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³  API ê´€ë¦¬](https://manage.searchad.naver.com) |
| **í•„ìš”í•œ í‚¤** | API Key, Secret Key, Customer ID |
| **ë°œê¸‰ ë°©ë²•** | ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³  ë¡œê·¸ì¸ â†’ ë„êµ¬ â†’ API ê´€ë¦¬ â†’ ë¼ì´ì„ ìŠ¤ ë°œê¸‰ |
| **ë¹„ìš©** | ë¬´ë£Œ |
| **ì…ë ¥ ìœ„ì¹˜** | ê´€ë¦¬ì â†’ í´ë¼ì´ì–¸íŠ¸ ìƒì„¸ â†’ ë°ì´í„° ì—°ë™ íƒ­ â†’ ì—°ë™ ì¶”ê°€ â†’ ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³  ì„ íƒ |

**í…ŒìŠ¤íŠ¸ ë°©ë²•:**
1. API Key, Secret Key, Customer ID ì…ë ¥
2. "ì—°ê²° í…ŒìŠ¤íŠ¸" ë²„íŠ¼ í´ë¦­
3. "âœ… ì—°ê²° ì„±ê³µ" í™•ì¸
4. "ì—°ë™ ì €ì¥" í´ë¦­
5. ëª©ë¡ì—ì„œ ğŸ”„ ì•„ì´ì½˜(ìˆ˜ë™ ë™ê¸°í™”) í´ë¦­í•˜ì—¬ ë°ì´í„° ìˆ˜ì§‘ í™•ì¸

---

### 3-2. Meta Ads (Facebook/Instagram)

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°œê¸‰ ìœ„ì¹˜** | [Meta for Developers](https://developers.facebook.com) |
| **í•„ìš”í•œ ê²ƒ** | Facebook App ìƒì„±, Business Verification |
| **í•„ìš”í•œ í¼ë¯¸ì…˜** | `ads_read`, `ads_management` |
| **í† í° ìœ í˜•** | Long-lived Token (60ì¼, ìë™ ê°±ì‹  ë¡œì§ í¬í•¨) |

**ì¤€ë¹„ ë‹¨ê³„:**

1. **Facebook App ë§Œë“¤ê¸°**
   - https://developers.facebook.com â†’ "My Apps" â†’ "Create App"
   - ì•± íƒ€ì…: "Business"
   - ì•± ì´ë¦„ ì§€ì • í›„ ìƒì„±

2. **Facebook Login ì¶”ê°€**
   - ì•± ëŒ€ì‹œë³´ë“œ â†’ Products â†’ "Facebook Login" ì¶”ê°€
   - Settings â†’ Valid OAuth Redirect URIsì— ì¶”ê°€:
     ```
     http://localhost:3000/api/auth/meta/callback
     https://your-domain.com/api/auth/meta/callback
     ```

3. **Marketing API í™œì„±í™”**
   - Products â†’ "Marketing API" ì¶”ê°€

4. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   - App ID â†’ `META_APP_ID`
   - App Secret â†’ `META_APP_SECRET`

5. **ì—°ë™ ë°©ë²• (ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ)**
   - í´ë¼ì´ì–¸íŠ¸ ìƒì„¸ â†’ ë°ì´í„° ì—°ë™ íƒ­
   - "Meta OAuth" ë²„íŠ¼ í´ë¦­ â†’ Facebook ë¡œê·¸ì¸ ë™ì˜
   - ë˜ëŠ” ì§ì ‘ Access Token, Ad Account ID ì…ë ¥

> âš ï¸ ì•±ì´ "ê°œë°œ ëª¨ë“œ"ì—ì„œëŠ” ë³¸ì¸ ê³„ì •ë§Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
> íƒ€ì¸ì˜ ê´‘ê³  ê³„ì •ì„ ì—°ë™í•˜ë ¤ë©´ "ë¼ì´ë¸Œ ëª¨ë“œ"ë¡œ ì „í™˜ + Business Verificationì´ í•„ìš”í•©ë‹ˆë‹¤.

---

### 3-3. Google Ads

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°œê¸‰ ìœ„ì¹˜** | [Google Cloud Console](https://console.cloud.google.com) |
| **í•„ìš”í•œ ê²ƒ** | OAuth 2.0 Client, Google Ads Developer Token |
| **í† í° ìœ í˜•** | Refresh Token (ë§Œë£Œ ì—†ìŒ) |

**ì¤€ë¹„ ë‹¨ê³„:**

1. **Google Cloud í”„ë¡œì íŠ¸ ìƒì„±**
   - https://console.cloud.google.com â†’ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±

2. **OAuth Consent Screen ì„¤ì •**
   - APIs & Services â†’ OAuth consent screen
   - User Type: External (í…ŒìŠ¤íŠ¸ëŠ” Internalë¡œë„ ê°€ëŠ¥)
   - ì•± ì´ë¦„, ì´ë©”ì¼ ë“± ì…ë ¥
   - Scopes ì¶”ê°€: `https://www.googleapis.com/auth/adwords.readonly`

3. **OAuth 2.0 Client ID ìƒì„±**
   - APIs & Services â†’ Credentials â†’ Create Credentials â†’ OAuth client ID
   - Application type: Web application
   - Authorized redirect URIsì— ì¶”ê°€:
     ```
     http://localhost:3000/api/auth/google/callback
     https://your-domain.com/api/auth/google/callback
     ```
   - Client ID â†’ `GOOGLE_CLIENT_ID`
   - Client Secret â†’ `GOOGLE_CLIENT_SECRET`

4. **Google Ads API í™œì„±í™”**
   - APIs & Services â†’ Library â†’ "Google Ads API" ê²€ìƒ‰ â†’ Enable

5. **Developer Token ë°œê¸‰**
   - https://ads.google.com â†’ ë„êµ¬ ë° ì„¤ì • â†’ ì„¤ì • â†’ API ì„¼í„°
   - Developer Token ë°œê¸‰ (ì´ˆê¸°ì—ëŠ” Test Accountë§Œ ì‚¬ìš© ê°€ëŠ¥)

6. **ì—°ë™ ë°©ë²•**
   - ê´€ë¦¬ì â†’ í´ë¼ì´ì–¸íŠ¸ ìƒì„¸ â†’ ë°ì´í„° ì—°ë™ â†’ "Google OAuth" ë²„íŠ¼ í´ë¦­
   - Google ë¡œê·¸ì¸ ë™ì˜ í›„, Refresh Token + Customer ID + Developer Token ì…ë ¥

> âš ï¸ Developer Tokenì€ ì‹ ì²­ í›„ ìŠ¹ì¸ê¹Œì§€ ë©°ì¹  ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œ ë¨¼ì € í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.

---

### 3-4. Google Analytics (GA4)

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°œê¸‰ ìœ„ì¹˜** | [Google Cloud Console](https://console.cloud.google.com) (Google Adsì™€ ë™ì¼ í”„ë¡œì íŠ¸ ì‚¬ìš© ê°€ëŠ¥) |
| **ì¶”ê°€ Scope** | `https://www.googleapis.com/auth/analytics.readonly` |

**ì¤€ë¹„ ë‹¨ê³„:**

1. Google Cloud í”„ë¡œì íŠ¸ì—ì„œ ì•„ë˜ API í™œì„±í™”:
   - **Google Analytics Data API** (v1beta)
   - **Google Analytics Admin API** (v1beta)

2. OAuth Consent Screenì˜ Scopeì— ì¶”ê°€:
   ```
   https://www.googleapis.com/auth/analytics.readonly
   ```

3. **ì—°ë™ ë°©ë²•**
   - "Google OAuth" ë²„íŠ¼ìœ¼ë¡œ ë™ì¼í•˜ê²Œ ì¸ì¦ (Ads + GA4 scope ëª¨ë‘ í¬í•¨)
   - GA4 Property ID ì…ë ¥ (í˜•ì‹: `properties/123456789`)
   - Property ID í™•ì¸: GA4 ê´€ë¦¬ â†’ ì†ì„± â†’ ì†ì„± ì„¤ì • â†’ ì†ì„± ID

> ğŸ’¡ Google Adsì™€ GA4ëŠ” ê°™ì€ OAuth ì¸ì¦ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> í•˜ë‚˜ì˜ Google OAuthë¡œ ë‘ ì„œë¹„ìŠ¤ ëª¨ë‘ ì—°ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

### 3-5. Google Gemini AI (ë³´ê³ ì„œ ìë™ ìƒì„±)

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°œê¸‰ ìœ„ì¹˜** | [Google AI Studio](https://aistudio.google.com/apikey) |
| **ë¹„ìš©** | ë¬´ë£Œ tier ì œê³µ (ë¶„ë‹¹ 15 ìš”ì²­) |

**ì¤€ë¹„ ë‹¨ê³„:**

1. https://aistudio.google.com/apikey ì—ì„œ API Key ìƒì„±
2. `.env.local`ì— `GEMINI_API_KEY=your-key` ì¶”ê°€

---

## 4. Vercel ë°°í¬ ì„¤ì •

### 4-1. Cron Jobs

`vercel.json`ì— ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

| Cron | ì‹œê°„ (UTC) | í•œêµ­ì‹œê°„ | ì—­í•  |
|------|-----------|---------|------|
| `/api/cron/sync-metrics` | ë§¤ì¼ 21:00 | ë§¤ì¼ 06:00 | ëª¨ë“  ì—°ë™ ë°ì´í„° ë™ê¸°í™” |
| `/api/cron/generate-report` | ë§¤ì£¼ ì›”ìš”ì¼ 00:00 | ë§¤ì£¼ ì›”ìš”ì¼ 09:00 | AI ì£¼ê°„ ë³´ê³ ì„œ ìë™ ìƒì„± |

### 4-2. Vercel í™˜ê²½ ë³€ìˆ˜

Vercel ëŒ€ì‹œë³´ë“œ â†’ Settings â†’ Environment Variablesì— ìœ„ `.env.local`ê³¼ ë™ì¼í•œ ë³€ìˆ˜ë¥¼ ëª¨ë‘ ì¶”ê°€í•©ë‹ˆë‹¤.

> âš ï¸ `CRON_SECRET`ì€ ë°˜ë“œì‹œ Vercelì— ì„¤ì •í•´ì•¼ cronì´ ì¸ì¦ë©ë‹ˆë‹¤.

### 4-3. Vercel Pro í”Œëœ (ì„ íƒ)

- Free í”Œëœ: Cron 1ì¼ 1íšŒë§Œ ê°€ëŠ¥
- Pro í”Œëœ: Cron ì‹œê°„ë‹¹ ì‹¤í–‰ ê°€ëŠ¥, maxDuration 300ì´ˆ

---

## 5. ë™ì‘ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ì¸í”„ë¼
- [ ] SQL ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì™„ë£Œ
- [ ] `NOTIFY pgrst, 'reload schema';` ì‹¤í–‰
- [ ] `.env.local`ì— `NEXT_PUBLIC_APP_URL`, `CRON_SECRET` ì¶”ê°€

### Phase 2: ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³ 
- [ ] ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³  API ë¼ì´ì„ ìŠ¤ ë°œê¸‰
- [ ] ê´€ë¦¬ì â†’ í´ë¼ì´ì–¸íŠ¸ â†’ ë°ì´í„° ì—°ë™ â†’ ë„¤ì´ë²„ ì—°ë™ ì¶”ê°€
- [ ] ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ
- [ ] ìˆ˜ë™ ë™ê¸°í™” ì‹¤í–‰ â†’ ë°ì´í„° ìˆ˜ì§‘ í™•ì¸

### Phase 3: Meta Ads
- [ ] Facebook App ìƒì„± ë° `.env.local`ì— í‚¤ ì¶”ê°€
- [ ] OAuth redirect URI ì„¤ì •
- [ ] ê´€ë¦¬ìì—ì„œ Meta OAuth ì¸ì¦ ì™„ë£Œ
- [ ] Ad Account ì„ íƒ í›„ ì—°ë™ ì €ì¥
- [ ] ìˆ˜ë™ ë™ê¸°í™” ì‹¤í–‰

### Phase 4: Google Ads + GA4
- [ ] Google Cloud í”„ë¡œì íŠ¸ ë° OAuth Client ìƒì„±
- [ ] `.env.local`ì— í‚¤ ì¶”ê°€
- [ ] Google Ads API + Analytics API í™œì„±í™”
- [ ] Google Ads Developer Token ë°œê¸‰
- [ ] ê´€ë¦¬ìì—ì„œ Google OAuth ì¸ì¦ ì™„ë£Œ
- [ ] Ads CID, GA4 Property ID ì…ë ¥ í›„ ì—°ë™ ì €ì¥
- [ ] ìˆ˜ë™ ë™ê¸°í™” ì‹¤í–‰

### Phase 5: AI ë³´ê³ ì„œ
- [ ] Gemini API Key ë°œê¸‰ ë° `.env.local`ì— ì¶”ê°€
- [ ] ìœ„ í”Œë«í¼ ì—°ë™ ì¤‘ í•˜ë‚˜ë¼ë„ ë°ì´í„° ìˆ˜ì§‘ ì„±ê³µ
- [ ] `/api/cron/generate-report`ì— ëŒ€í•œ cURL í…ŒìŠ¤íŠ¸:
  ```bash
  curl -H "Authorization: Bearer my-super-secret-cron-token-12345" \
       http://localhost:3000/api/cron/generate-report
  ```
- [ ] í´ë¼ì´ì–¸íŠ¸ ë¦¬í¬íŠ¸ í˜ì´ì§€ì— AI ìƒì„± ë³´ê³ ì„œ í™•ì¸

---

## 6. ë¬¸ì œ í•´ê²° (Troubleshooting)

| ì¦ìƒ | ì›ì¸ | í•´ê²° |
|------|------|------|
| "ì—°ê²° ì‹¤íŒ¨" (ë„¤ì´ë²„) | API Key/Secret ì˜¤íƒ€ | í‚¤ ì¬í™•ì¸, HMAC ì„œëª…ì€ ìë™ ìƒì„±ë¨ |
| "ì—°ê²° ì‹¤íŒ¨" (Meta) | í† í° ë§Œë£Œ ë˜ëŠ” í¼ë¯¸ì…˜ ë¶€ì¡± | Meta OAuth ì¬ì¸ì¦ |
| "ì—°ê²° ì‹¤íŒ¨" (Google) | OAuth Consent Screen ë¯¸ì„¤ì • | ìœ„ 3-3 ë‹¨ê³„ í™•ì¸ |
| Cron ì‹¤í–‰ ì•ˆë¨ | `CRON_SECRET` ë¶ˆì¼ì¹˜ | Vercel í™˜ê²½ë³€ìˆ˜ í™•ì¸ |
| "enabled_services" / "Could not find the 'enabled_services' column" | ì»¬ëŸ¼ ë¯¸ì¶”ê°€ ë˜ëŠ” ìŠ¤í‚¤ë§ˆ ìºì‹œ | Supabase SQL Editorì—ì„œ `supabase/sql/04-migrations/003-enabled-services-schema-reload.sql` ì‹¤í–‰ (ì»¬ëŸ¼ ì¶”ê°€ + `NOTIFY pgrst, 'reload schema';`) |
| AI ë³´ê³ ì„œ ìƒì„± ì•ˆë¨ | `GEMINI_API_KEY` ë¯¸ì„¤ì • | í™˜ê²½ë³€ìˆ˜ í™•ì¸ |

---

## 7. ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ì„¤ì •

### 7-1. ì†”ë¼í”¼(Solapi) ê°€ì… ë° API Key ë°œê¸‰

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°œê¸‰ ìœ„ì¹˜** | [ì†”ë¼í”¼](https://solapi.com) |
| **ë¹„ìš©** | ì•Œë¦¼í†¡ 1ê±´ë‹¹ ì•½ 8ì› (ì„ ë¶ˆ ì¶©ì „) |

**ì¤€ë¹„ ë‹¨ê³„:**

1. https://solapi.com ì—ì„œ íšŒì›ê°€ì…
2. ì½˜ì†” â†’ API Key ê´€ë¦¬ â†’ API Key & Secret ë°œê¸‰
3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
   ```bash
   SOLAPI_API_KEY=your-api-key
   SOLAPI_API_SECRET=your-api-secret
   ```

### 7-2. ì¹´ì¹´ì˜¤í†¡ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ì„¤ì •

1. [ì¹´ì¹´ì˜¤ë¹„ì¦ˆë‹ˆìŠ¤](https://business.kakao.com) ê°€ì…
2. ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ìƒì„± (ì˜ˆ: @onecation)
3. ì†”ë¼í”¼ ì½˜ì†”ì—ì„œ ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì—°ë™
4. í”„ë¡œí•„ ID(PFID) í™•ì¸ â†’ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
   ```bash
   SOLAPI_PFID=your-pfid
   SOLAPI_SENDER_NUMBER=01012345678
   ```

### 7-3. ì•Œë¦¼í†¡ í…œí”Œë¦¿ ë“±ë¡

ì¹´ì¹´ì˜¤ ë¹„ì¦ˆì„¼í„°ì—ì„œ ì•„ë˜ í…œí”Œë¦¿ì„ **ì‚¬ì „ ë“±ë¡ ë° ìŠ¹ì¸**ë°›ì•„ì•¼ í•©ë‹ˆë‹¤:

| í…œí”Œë¦¿ ID | ìš©ë„ | ë³€ìˆ˜ |
|-----------|------|------|
| `TPL_report_published` | ë³´ê³ ì„œ ë°œí–‰ ì•Œë¦¼ | `#{ê³ ê°ëª…}`, `#{ë¦¬í¬íŠ¸ì œëª©}`, `#{ë§í¬}` |
| `TPL_action_status` | ì‹¤í–‰í•­ëª© ìƒíƒœ ë³€ê²½ | `#{ê³ ê°ëª…}`, `#{ì‘ì—…ëª…}`, `#{ì´ì „ìƒíƒœ}`, `#{í˜„ì¬ìƒíƒœ}` |
| `TPL_event_reminder` | ì¼ì • ë¦¬ë§ˆì¸ë” | `#{ê³ ê°ëª…}`, `#{ì¼ì •ëª…}`, `#{ë‚ ì§œ}` |

> âš ï¸ í…œí”Œë¦¿ ìŠ¹ì¸ê¹Œì§€ 1~2ì˜ì—…ì¼ ì†Œìš”ë©ë‹ˆë‹¤.
> í…œí”Œë¦¿ IDëŠ” `src/lib/notifications/alimtalk.ts`ì˜ `TEMPLATE_IDS`ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.

### 7-4. í…ŒìŠ¤íŠ¸

1. ê´€ë¦¬ì â†’ ì•Œë¦¼ ì„¤ì • í˜ì´ì§€ ì ‘ì†
2. ì „í™”ë²ˆí˜¸ê°€ ë“±ë¡ëœ í´ë¼ì´ì–¸íŠ¸ ì„ íƒ
3. ì•Œë¦¼ ìœ í˜• ì„ íƒ â†’ "í…ŒìŠ¤íŠ¸ ë°œì†¡" í´ë¦­
4. ë°œì†¡ ê²°ê³¼ í™•ì¸

---

## 8. íŒŒì¼ êµ¬ì¡° ì°¸ì¡°

```
src/
  lib/
    integrations/
      sync-engine.ts   â†’ ê³µí†µ ë™ê¸°í™” ì—”ì§„
      naver.ts         â†’ ë„¤ì´ë²„ ê²€ìƒ‰ê´‘ê³  API
      meta.ts          â†’ Meta Ads API
      google-ads.ts    â†’ Google Ads API
      ga4.ts           â†’ GA4 Data API
    ai/
      report-generator.ts â†’ Gemini AI ë³´ê³ ì„œ ìƒì„±
  app/
    api/
      admin/integrations/      â†’ ì—°ë™ CRUD + í…ŒìŠ¤íŠ¸ + ìˆ˜ë™ë™ê¸°í™”
      auth/meta/callback/      â†’ Meta OAuth ì½œë°±
      auth/google/callback/    â†’ Google OAuth ì½œë°±
      cron/sync-metrics/       â†’ ë°ì´í„° ë™ê¸°í™” Cron
      cron/generate-report/    â†’ AI ë³´ê³ ì„œ ìƒì„± Cron
    (portal)/marketing/        â†’ í´ë¼ì´ì–¸íŠ¸ ë§ˆì¼€íŒ… ì„±ê³¼ ëŒ€ì‹œë³´ë“œ
  admin/notifications/         â†’ ì•Œë¦¼ ì„¤ì • ê´€ë¦¬ í˜ì´ì§€
  lib/notifications/alimtalk.ts â†’ ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡ ëª¨ë“ˆ
  api/admin/notifications/send/ â†’ ì•Œë¦¼ ë°œì†¡ API
vercel.json                    â†’ Cron ìŠ¤ì¼€ì¤„ ì„¤ì •
```
