# 클라이언트·관리자 페이지 개선 보고서

**작성일:** 2025-02-13  
**대상:** 클라이언트 포털 및 관리자(Admin) 페이지  
**목적:** 코드 수정 없이 개선 가능 영역 점검 및 정리

---

## 1. 요약

| 구분 | 개선 항목 수 | 우선순위 높음 |
|------|-------------|----------------|
| 클라이언트 포털 | 12 | 4 |
| 관리자 페이지 | 8 | 2 |
| 공통 | 6 | 3 |

---

## 2. 클라이언트 포털 개선 포인트

### 2.1 UX·일관성

| 항목 | 현황 | 제안 |
|------|------|------|
| **페이지 제목 언어 혼용** | 일부는 영문(Execution, Assets, Projects, Support, Calendar), 일부는 한글(개요, 리포트, 자료실) | 제목을 한글로 통일하거나, 서비스 톤에 맞춰 한/영 정책을 정한 뒤 일괄 적용 권장. |
| **Support 페이지** | 상단 제목이 "Support", 부제는 "도움이 필요하신가요?" | 제목을 "문의하기" 등 한글로 맞추면 사이드바 메뉴명(문의하기)과 일치. |
| **공지사항** | "아직 등록된 공지사항이 없습니다" 고정 문구만 표시, 실제 공지 CRUD/연동 없음 | 공지 데이터 연동 또는 해당 블록 제거/플레이스홀더 문구 정리. |

### 2.2 에러·예외 처리

| 항목 | 현황 | 제안 |
|------|------|------|
| **전역 에러 UI** | `app/error.tsx` 없음 | Next.js App Router용 전역 `error.tsx` 추가 시 런타임 에러 시 사용자에게 안내 가능. |
| **404 페이지** | `app/not-found.tsx` 없음 | `notFound()` 호출 시 기본 404 대신 브랜드에 맞는 `not-found.tsx` 제공 권장. |
| **리포트 첨부파일 다운로드** | 실패 시 `console.error`만 사용, 화면 피드백 없음 | 실패 시 토스트/인라인 메시지로 "다운로드에 실패했습니다" 등 안내. |

### 2.3 접근성·메타

| 항목 | 현황 | 제안 |
|------|------|------|
| **페이지별 메타데이터** | 루트 `layout.tsx`에만 기본 메타, 개별 페이지 title/description 없음 | 주요 페이지(개요, 리포트, 캘린더 등)에 `metadata` 또는 `generateMetadata`로 title/description 설정 시 SEO·북마크·탭 표시 개선. |
| **버튼·링크 라벨** | 일부 아이콘 버튼에 `title`만 있고 `aria-label` 없음 | 스크린 리더 대응을 위해 `aria-label` 또는 접근 가능한 텍스트 보완. |

### 2.4 기타

| 항목 | 현황 | 제안 |
|------|------|------|
| **로그인 폼** | "이메일"은 한글, "Password"는 영문 라벨 | "비밀번호" 등 한글로 통일하면 일관성 향상. |
| **빈 상태(Empty State)** | `EmptyState` 컴포넌트로 메시지 통일됨 | 유지. 필요 시 일부 화면에 CTA(예: 문의하기 링크) 추가 검토. |
| **모바일 헤더** | 메뉴 버튼만 있어 여백이 많음 | 디자인 정책에 따라 로고/타이틀 추가 여부 검토(선택). |

---

## 3. 관리자 페이지 개선 포인트

### 3.1 레이아웃·구성

| 항목 | 현황 | 제안 |
|------|------|------|
| **푸터** | 관리자 레이아웃에는 푸터 없음(클라이언트에만 존재) | 운영 정책에 따라 관리자에도 회사 정보/연락처 푸터 필요 시 동일 컴포넌트 재사용 검토. |
| **메인 영역 높이** | `main`만 있고 `min-h-screen`·flex 구조 없음 | 콘텐츠가 적을 때 하단이 비는 느낌을 줄이려면 클라이언트처럼 `flex min-h-screen` 구조 적용 검토. |
| **사이드바 접기/펼치기** | 클라이언트만 데스크톱 사이드바 토글 있음, 관리자는 항상 펼침 | 관리자에서도 동일하게 접기/펼치기 제공 시 화면 활용도·일관성 개선 가능. |

### 3.2 대시보드·메뉴

| 항목 | 현황 | 제안 |
|------|------|------|
| **대시보드 카드** | 클라이언트, 프로젝트, 캘린더, 리포트, 자료실만 카운트 | 실행 내역(actions) 등 추가 메뉴가 있다면 대시보드 카드와 수치 연동 검토. |
| **알림 설정** | 사이드바에 "알림 설정" 메뉴 있음 | 해당 페이지와 API 연동 상태·권한 정리. |

### 3.3 에러·일관성

| 항목 | 현황 | 제안 |
|------|------|------|
| **error / not-found** | 클라이언트와 동일하게 전역 `error.tsx`, `not-found.tsx` 없음 | `app/admin/error.tsx`, `app/admin/not-found.tsx` 또는 상위 공통 처리로 관리자 전용 메시지 제공 가능. |
| **페이지별 메타** | 관리자 페이지도 개별 title 없음 | "클라이언트 관리 | Onecation" 등 관리자용 메타 추가 시 탭·북마크 식별 용이. |

---

## 4. 공통 개선 포인트

### 4.1 에러·예외

| 항목 | 제안 |
|------|------|
| **error.tsx** | `app/error.tsx`에서 공통 에러 UI 렌더링 및 "다시 시도" 등 액션 제공. |
| **not-found.tsx** | `app/not-found.tsx`에서 404 메시지 + 로그인/개요/관리자 등 역할별 복귀 링크. |
| **API 실패 피드백** | 폼 제출·다운로드·저장 등 실패 시 사용자에게 토스트/인라인 메시지로 안내. |

### 4.2 인증·권한

| 항목 | 현황 | 제안 |
|------|------|------|
| **역할 리다이렉트** | `requireClient` → role !== "client" 시 `/admin`, `requireAdmin` → role !== "admin" 시 `/overview` | 의도된 동작으로 보임. role이 null/undefined인 경우 처리만 확인 권장. |
| **비밀번호 변경** | 로그인 후 `must_change_password` 시 `/change-password` 이동 | 유지. |

### 4.3 성능·로딩

| 항목 | 현황 | 제안 |
|------|------|------|
| **로딩 UI** | `(portal)/loading.tsx`, `admin/loading.tsx` 스켈레톤 존재 | 유지. 세그먼트별 로딩이 필요한 페이지는 해당 layout/page에 `loading.tsx` 추가 검토. |
| **동적 임포트** | 리포트 상세의 TiptapViewer는 `dynamic(..., { ssr: false })` 사용 | 번들 분리·초기 로딩에 유리. 유지. |

---

## 5. 우선순위 제안

### 높음 (사용자 영향 큼)

1. **전역 error.tsx / not-found.tsx** — 예외·잘못된 URL 시 일관된 안내.
2. **리포트 다운로드 실패 시 사용자 메시지** — 실패 원인을 사용자에게 알림.
3. **페이지 제목·라벨 언어 정책** — 한글/영문 통일로 일관된 인상.

### 중간 (일관성·운영)

4. **관리자 레이아웃 구조** — min-h·flex로 빈 공간 감소.
5. **페이지별 메타데이터** — title/description으로 SEO·탭 표시 개선.
6. **Support 공지사항** — 연동 또는 UI 정리.

### 낮음 (선택)

7. **관리자 사이드바 접기** — 클라이언트와 동일 패턴 적용.
8. **관리자 푸터** — 필요 시 추가.
9. **접근성 aria-label** — 스크린 리더 등 보조 기술 대응.

---

## 6. 참고 파일 위치

| 구분 | 경로 |
|------|------|
| 클라이언트 레이아웃 | `src/app/(portal)/layout.tsx` |
| 관리자 레이아웃 | `src/app/admin/layout.tsx` |
| 공통 사이드바 래퍼 | `src/components/layout/mobile-sidebar-wrapper.tsx` |
| 클라이언트 사이드바 | `src/components/layout/client-sidebar.tsx` |
| 관리자 사이드바 | `src/components/layout/admin-sidebar.tsx` |
| 모듈 비활성화 UI | `src/components/module-guard.tsx` |
| 인증 | `src/lib/auth.ts` |
| 로딩(포털) | `src/app/(portal)/loading.tsx` |
| 로딩(관리자) | `src/app/admin/loading.tsx` |

---

## 7. 타당성 검토 (코드베이스 대조 결과)

**검토일:** 2025-02-13  
**방법:** 보고서 항목과 실제 코드(`src/`) 대조

### 7.1 정확한 지적

| 보고서 항목 | 검증 결과 |
|------------|-----------|
| **error.tsx / not-found.tsx 없음** | ✅ `src/app` 하위에 두 파일 모두 없음. |
| **리포트 다운로드 실패 시 console.error만** | ✅ `report-detail-view.tsx` 44행: `console.error("Download failed:", err)` 후 사용자 피드백 없음. |
| **페이지 제목 언어 혼용** | ✅ 포털 본문 제목이 영문: Execution, Assets, Projects, Calendar, Support (`execution/page.tsx`, `assets/page.tsx` 등). 사이드바는 한글(실행 현황, 자료실 등). |
| **Support 페이지** | ✅ `support/page.tsx` 18행: `<h1>Support</h1>`, 부제 "도움이 필요하신가요?" — 사이드바 "문의하기"와 불일치. |
| **공지사항 고정 문구** | ✅ "아직 등록된 공지사항이 없습니다" 하드코딩, CRUD/테이블 연동 없음. |
| **로그인 폼 "Password" 영문** | ✅ `login/page.tsx` 104행: `<Label htmlFor="password">Password</Label>`. |
| **관리자 푸터 없음** | ✅ `admin/layout.tsx`에는 푸터 없음. `(portal)/layout.tsx`만 `<Footer />` 사용. |
| **관리자 main에 min-h·flex 없음** | ✅ admin layout은 `<main className="p-4 md:p-6">` 만 있음. 클라이언트는 `flex min-h-screen flex-col` + `main flex-1`. |
| **관리자 사이드바 접기 없음** | ✅ `admin-sidebar.tsx`는 고정 `w-60`. `client-sidebar.tsx`만 `PanelLeftClose`/`PanelRight` 토글 있음. |
| **루트 메타만 존재** | ✅ `app/layout.tsx`에만 `metadata` (title: "Onecation Client Portal"). 개별 페이지 `metadata`/`generateMetadata` 없음. |
| **대시보드 카드** | ✅ 클라이언트, 프로젝트, 캘린더, 리포트, 자료실만 카운트. 실행항목(actions) 카드/수치 없음. |
| **알림 설정** | ✅ 사이드바에 "알림 설정" 있고, `/admin/notifications` 페이지 및 API 존재. |

### 7.2 보완 사항

| 항목 | 비고 |
|------|------|
| **접근성 aria-label** | 아이콘 버튼에 `title`은 있으나 `aria-label` 미비. 스크린 리더 대응 시 일괄 점검 필요. |
| **role null/undefined** | `requireClient`/`requireAdmin`에서 role이 없을 때 리다이렉트 경로는 코드에서 확인 필요. |

**결론:** 보고서 내용은 **전반적으로 타당**하며, 코드와 대조한 결과 대부분 정확합니다. 일부는 이미 한글화된 부분(사이드바 라벨)과 페이지 제목(영문)을 구분해 이해하면 됩니다.

---

## 8. 업무범위 및 가능 여부 체크리스트

구현 난이도·영향도를 기준으로 **가능한 부분**을 체크했습니다. ✅ = 권장(범위 내), ⚠️ = 조건부(DB/정책 등 확인 필요), ❌ = 해당 없음 또는 보류.

### 8.1 높음 우선순위

| # | 항목 | 가능 여부 | 비고 |
|---|------|-----------|------|
| 1 | **전역 error.tsx** | ✅ | `app/error.tsx` 추가. "다시 시도" 버튼 + reset. |
| 2 | **전역 not-found.tsx** | ✅ | `app/not-found.tsx` 추가. 404 메시지 + 로그인/개요/관리자 링크. |
| 3 | **리포트 다운로드 실패 시 사용자 메시지** | ✅ | `report-detail-view.tsx`에서 실패 시 토스트 또는 인라인 에러 메시지 표시. |
| 4 | **페이지 제목·라벨 언어 통일** | ✅ | 포털 페이지 h1 한글화(실행 현황, 자료실, 프로젝트, 캘린더, 문의하기). 로그인 "Password" → "비밀번호". |

### 8.2 중간 우선순위

| # | 항목 | 가능 여부 | 비고 |
|---|------|-----------|------|
| 5 | **관리자 레이아웃 min-h·flex** | ✅ | `admin/layout.tsx`에 클라이언트와 동일하게 `flex min-h-screen flex-col`, `main flex-1` 적용. |
| 6 | **페이지별 메타데이터** | ✅ | 주요 페이지(개요, 리포트, 캘린더, 문의하기, admin 대시/클라이언트 등)에 `metadata` 또는 `generateMetadata` 추가. |
| 7 | **Support 공지사항** | ⚠️ | 공지 CRUD·테이블 설계 필요. 단기: 문구만 "공지가 등록되면 여기서 확인할 수 있습니다" 등으로 정리 가능(✅). |

### 8.3 낮음 우선순위

| # | 항목 | 가능 여부 | 비고 |
|---|------|-----------|------|
| 8 | **관리자 사이드바 접기/펼치기** | ✅ | `MobileSidebarWrapper` 또는 클라이언트와 동일 패턴으로 admin 사이드바에 접기 상태 추가. |
| 9 | **관리자 푸터** | ✅ | 필요 시 `Footer`를 admin layout에 포함. |
| 10 | **접근성 aria-label** | ✅ | 아이콘 전용 버튼/링크에 `aria-label` 추가. 범위 지정 후 일괄 적용 가능. |

### 8.4 선택·보류

| 항목 | 가능 여부 | 비고 |
|------|-----------|------|
| **관리자 error/not-found** | ✅ | `app/admin/error.tsx`, `app/admin/not-found.tsx`로 관리자 전용 메시지 가능. 또는 루트와 동일 컴포넌트 재사용. |
| **대시보드에 실행항목(actions) 카드** | ✅ | `safeCount("actions")` 추가 후 카드 한 개 추가. 링크는 실행항목 목록이 있는 클라이언트 상세 또는 별도 화면으로 연결. |
| **모바일 헤더 로고/타이틀** | ✅ | 디자인 정책에 따라 선택. |

---

## 9. 권장 진행 순서

1. **1차(필수):** 전역 `error.tsx`, `not-found.tsx`, 리포트 다운로드 실패 메시지, 로그인 "비밀번호" 라벨, 포털 페이지 제목 한글화.
2. **2차(일관성):** 관리자 레이아웃 flex/min-h, 페이지별 메타데이터, Support 제목 "문의하기" 및 공지 문구 정리.
3. **3차(선택):** 관리자 사이드바 접기, 푸터, aria-label, 대시보드 actions 카드.

---

*이 문서는 코드 변경 없이 현황을 정리한 점검 보고서입니다. §7–§9는 코드베이스 대조 후 타당성 검토 및 업무범위·가능 여부를 추가한 것입니다. 반영 시에는 위 체크리스트와 권장 순서를 참고해 진행하면 됩니다.*
