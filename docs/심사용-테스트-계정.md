# 심사용 테스트 계정 (목업 데이터 포함)

Google / Meta 앱 심사 시 **로그인해서 실제 화면을 보여주기** 위한 테스트 계정을 한 번에 만드는 방법입니다.

## 목적

- 심사관에게 **이메일 + 비밀번호**를 제출하면, 로그인 후 **개요, 실행 현황, 캘린더, 프로젝트, 리포트** 등에 빈 화면이 아닌 **샘플(목업) 데이터**가 보이도록 합니다.
- 한 번 실행하면 Auth 사용자 1명 + 프로필 + 목업 데이터가 자동으로 생성됩니다.

## 계정 생성 방법

### 1. 환경 변수

프로젝트 루트의 `.env.local`에 다음이 있어야 합니다.

- `NEXT_PUBLIC_SUPABASE_URL` — Supabase 프로젝트 URL
- `SUPABASE_SERVICE_ROLE_KEY` — Supabase 서비스 롤 키 (Supabase 대시보드 > Settings > API)

(선택) 테스트 계정 이메일/비밀번호를 바꾸려면:

- `DEMO_ACCOUNT_EMAIL` — 기본값: `demo@gmail.com`
- `DEMO_ACCOUNT_PASSWORD` — 기본값: `Admin123!`

### 2. 실행

```bash
npm run seed:demo
```

또는

```bash
npx tsx scripts/seed-demo-account.ts
```

### 3. 결과

- Supabase Auth에 테스트 사용자 1명 생성 (이메일 인증 완료 상태)
- `profiles` 테이블에 해당 사용자를 **클라이언트**로, **데모 클라이언트**에 연결
- 데모 클라이언트에 **목업 데이터** 삽입:
  - **metrics**: 방문자 수, 리드 수, 전환율, 광고비 등
  - **actions**: 실행 항목 3건
  - **calendar_events**: 일정 3건
  - **projects**: 프로젝트 2건
  - **reports**: 주간/월간 리포트 2건

콘솔에 출력되는 **이메일**과 설정한 **비밀번호**로 로그인하면 위 데이터가 보입니다.

## 테스트 계정 정보 (기본값)

| 항목     | 값 (기본)    |
|----------|--------------|
| 이메일   | demo@gmail.com |
| 비밀번호 | Admin123!    |

실서비스 배포 시에는 문서에 비밀번호를 남기지 말고, 심사 제출 시에만 별도로 전달하는 것을 권장합니다.

## 목업 데이터 범위

| 화면       | 내용 |
|------------|------|
| 개요       | KPI 카드, 메트릭 추이, 최근 실행 내역, 최신 리포트, 로드맵(캘린더) |
| 실행 현황  | 실행 항목 목록 |
| 캘린더     | 일정 목록 |
| 프로젝트   | 프로젝트 목록 |
| 리포트     | 주간/월간 리포트 목록 |

파일 다운로드용 `file_path`는 더미 경로이며, 실제 파일이 업로드된 것은 아닙니다.

## 이미 같은 이메일이 있을 때 · 계정 삭제 없이 데이터만 넣기

동일한 이메일로 이미 Auth 사용자가 있으면 `npm run seed:demo`는 **실패**하고 종료합니다.

**기존 데모 계정은 그대로 두고, 목업 데이터만 추가**하고 싶다면 아래를 사용하세요. (사용자 삭제 불가 시 권장)

```bash
npm run seed:demo:data
```

또는

```bash
npx tsx scripts/seed-demo-data-only.ts
```

- 데모 클라이언트(`c0000000-0000-0000-0000-000000000001`)가 있고, 그 클라이언트에 연결된 **프로필(사용자)이 1명 이상** 있어야 합니다.
- 기존 Auth 사용자/계정은 생성·삭제하지 않고, **projects, actions, calendar_events, reports, KPI, metrics, platform_metrics** 등만 추가로 넣습니다.
- 같은 스크립트를 여러 번 실행하면 같은 종류의 데이터가 **중복**으로 들어갈 수 있으므로, 필요할 때 한 번만 실행하는 것을 권장합니다.

새로 계정부터 만들고 싶다면 `DEMO_ACCOUNT_EMAIL`을 바꾸거나, Supabase **Authentication > Users**에서 해당 사용자를 삭제한 뒤 `npm run seed:demo`를 다시 실행하세요.

## 대안: 수동으로 Auth만 만들고 프로필·목업만 넣고 싶을 때

1. Supabase 대시보드 **Authentication > Users**에서 **Add user**로 이메일/비밀번호로 사용자 생성.
2. 생성된 사용자의 **UUID** 복사.
3. 프로필과 목업 데이터는 **스크립트가 담당하는 로직**과 동일한 insert가 필요하므로, 보통은 **스크립트를 그대로 한 번 실행**하는 방식이 가장 간단합니다.  
   (수동으로 SQL만으로 넣으려면 `profiles` insert 후 `metrics`, `actions`, `calendar_events`, `projects`, `reports`에 `client_id = c0000000-0000-0000-0000-000000000001`, `created_by = 해당 UUID`로 insert해야 합니다.)
