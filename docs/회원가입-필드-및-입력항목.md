# 회원가입 — 필드 목록 및 입력 항목

## 1. DB/API 저장 필드 목록

### 1.1 Auth (Supabase Auth)

| 필드명 | 타입 | 필수 | 비고 |
|--------|------|------|------|
| email | string | O | 로그인 ID. 소문자·trim 후 저장 권장 |
| password | string | O | Supabase가 암호화 저장. API에는 평문으로만 전달 |

- 가입 시 `supabase.auth.signUp({ email, password })` 호출 후 반환된 `user.id` 사용.

---

### 1.2 Profile (가입 시 한 번 생성, 승인 전 상태)

| 필드명 | 타입 | 필수 | 비고 |
|--------|------|------|------|
| user_id | UUID | O | Auth 사용자 ID (signUp 반환값) |
| role | enum | O | 가입 시 `'pending'` 고정. 승인 시 `'client'`로 변경 |
| client_id | UUID | - | 승인 전에는 `null`. 승인 시 관리자가 지정한 클라이언트 ID |
| display_name | string | O | 가입 폼의 "이름" |
| email | string | O | 가입 폼의 "이메일" (Auth와 동일) |
| company_name | string | O | 가입 폼의 "회사/단체명". 승인 시 새 클라이언트 생성 시 `clients.name`으로 사용 가능 |
| phone | string | - | 가입 폼의 "연락처" (선택). 승인 시 `clients.contact_phone` 등에 반영 가능 |
| must_change_password | boolean | - | 신규 가입 시 `false` 또는 정책에 따라 `true` |
| created_at | timestamptz | O | 서버 기본값 `now()` |

- **스키마 변경 필요**
  - `profiles.role` CHECK에 `'pending'` 추가.
  - `profiles` 테이블에 `company_name TEXT`, `phone TEXT` 컬럼 추가 (nullable 허용).
- 또는 별도 테이블 `signup_requests (user_id, email, display_name, company_name, phone, status, created_at)` 로 대체 가능. 이 경우 `profiles`는 승인 시점에 생성해도 됨.

---

### 1.3 API 요청 body (회원가입 API 예시)

```json
{
  "email": "user@example.com",
  "password": "비밀번호",
  "passwordConfirm": "비밀번호",
  "displayName": "홍길동",
  "companyName": "(주)원마케팅",
  "phone": "010-1234-5678"
}
```

- `passwordConfirm`은 서버에서 `password`와 일치 여부만 검사 (DB 미저장).
- `phone`은 선택이면 omit 가능.

---

## 2. 화면 입력 항목 (라벨 · placeholder · 유효성)

### 2.1 이메일

| 항목 | 내용 |
|------|------|
| **라벨** | 이메일 |
| **placeholder** | 예: user@company.com |
| **type** | `email` (또는 `text` + 패턴 검사) |
| **자동완성** | `autoComplete="email"` |
| **유효성** | 필수, 이메일 형식, 공백 제거 후 저장 |
| **에러 메시지** | "이메일을 입력해 주세요." / "올바른 이메일 형식이 아닙니다." |
| **비고** | 중복 가입 방지: 동일 이메일로 이미 가입된 경우 "이미 가입된 이메일입니다." |

---

### 2.2 비밀번호

| 항목 | 내용 |
|------|------|
| **라벨** | 비밀번호 |
| **placeholder** | 6자 이상 입력 |
| **type** | `password` (우측 눈 아이콘으로 표시 전환) |
| **자동완성** | `autoComplete="new-password"` |
| **유효성** | 필수, 최소 6자 |
| **에러 메시지** | "비밀번호를 입력해 주세요." / "비밀번호는 6자 이상 입력해 주세요." |

---

### 2.3 비밀번호 확인

| 항목 | 내용 |
|------|------|
| **라벨** | 비밀번호 확인 |
| **placeholder** | 비밀번호를 다시 입력하세요 |
| **type** | `password` (우측 눈 아이콘으로 표시 전환) |
| **자동완성** | `autoComplete="new-password"` |
| **유효성** | 필수, 위 비밀번호와 동일 |
| **에러 메시지** | "비밀번호가 일치하지 않습니다." |

---

### 2.4 이름

| 항목 | 내용 |
|------|------|
| **라벨** | 이름 |
| **placeholder** | 담당자 이름을 입력하세요 |
| **type** | `text` |
| **자동완성** | `autoComplete="name"` |
| **유효성** | 필수, 앞뒤 공백 제거, 1자 이상 |
| **에러 메시지** | "이름을 입력해 주세요." |

---

### 2.5 회사/단체명

| 항목 | 내용 |
|------|------|
| **라벨** | 회사/단체명 |
| **placeholder** | 예: (주)원마케팅 |
| **type** | `text` |
| **자동완성** | `autoComplete="organization"` |
| **유효성** | 필수, 앞뒤 공백 제거, 1자 이상 |
| **에러 메시지** | "회사/단체명을 입력해 주세요." |

---

### 2.6 전화번호 (필수)

| 항목 | 내용 |
|------|------|
| **라벨** | 전화번호 |
| **placeholder** | 예: 010-1234-5678 |
| **type** | `tel` |
| **자동완성** | `autoComplete="tel"` |
| **유효성** | 필수. 입력 시 숫자만 허용 후 010-XXXX-XXXX 형식으로 하이픈 자동 삽입 |
| **에러 메시지** | "전화번호를 입력해 주세요. (예: 010-1234-5678)" |

---

## 3. 폼 배치 및 부가 UI 제안

- **순서**: 회사/단체명 → 이름 → 전화번호 → 이메일 → 비밀번호 → 비밀번호 확인.
- **제출 버튼**: "가입 신청" / "회원가입" 등. 로딩 중 비활성화.
- **가입 완료 후**: "가입이 완료되었습니다. 관리자 승인 후 로그인하여 이용할 수 있습니다." 안내 + 로그인 페이지로 이동 링크.
- **로그인 페이지**: "회원가입" 링크로 이 가입 페이지로 이동.

이 문서를 기준으로 회원가입 API·DB 스키마·화면을 구현하면 됩니다.
