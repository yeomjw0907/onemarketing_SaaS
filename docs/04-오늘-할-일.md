# 04. 오늘 할 일

> 문서들(`01-먼저-할-일`, `03-내일-할-일`, `05-플랫폼-연동`, `10-Meta-OAuth` 등)을 기준으로 **오늘 할 일**을 우선순위대로 정리한 체크리스트입니다.

---

## 🔴 1. 로그인·Supabase (최우선)

로그인이 되지 않으면 다른 작업을 진행할 수 없습니다.

### 1-1. Supabase "설정이 없거나 placeholder" 콘솔 에러 해결

**증상:** 로그인 페이지/버튼 시 콘솔에  
`[Supabase] .env.local에 실제 Supabase URL과 Anon Key를 넣은 뒤...`  
→ `isSupabaseConfigured()`가 false로 인식됨.

**할 일:**
- 클라이언트 번들에 `NEXT_PUBLIC_*` 값이 왜 안 들어가는지 확인 (Next 빌드/캐시, 실행 경로).
- 필요 시 `src/lib/supabase/client.ts`에서 값을 읽는 방식 변경 또는 브라우저에 URL/Key 전달 방식 수정.
- 참고: `03-내일-할-일.md` 2번.

### 1-2. 개발 서버 올바른 폴더에서 실행

- **반드시** 프로젝트 폴더에서만 실행:
  ```powershell
  cd "C:\Users\yeomj\OneDrive\Desktop\원마케팅SaaS"
  npm run dev
  ```
- `.next` 폴더가 있으면 삭제 후 재실행:  
  `Remove-Item -Recurse -Force .next`
- `.env.local`에 **실제** Supabase URL·Anon Key가 들어 있어야 함 (placeholder 사용 금지).

### 1-3. 로그인 "Failed to fetch" 해결

- 위 1-1, 1-2 완료 후에도 `your-project.supabase.co` / `ERR_NAME_NOT_RESOLVED` 또는 `Failed to fetch` 나오면:
  - dev 서버 완전 종료 → 원마케팅SaaS 폴더에서만 `npm run dev` → 브라우저에서 `http://localhost:3000` 로그인 재시도.

---

## 🟠 2. Auth·프로필 재설정 (회원 정보 정리)

로그인 가능해지면, 사용 계정을 정리합니다.

| 용도 | 이메일 | UUID |
|------|--------|------|
| Admin | yeomjw0907@naver.com | 9b54abfa-7692-48a3-804d-bec6b977181d |
| 테스트(클라이언트) | test1@naver.com | ebf05114-6c34-4c20-b25f-d31496c24541 |

**순서:**
1. Supabase Dashboard → **Authentication** → **Users**  
   - 필요 시 기존 사용자 정리 후, 위 두 이메일로 **Create new user** (비밀번호 설정).
2. SQL Editor에서 **`supabase/sql/03-seed/profiles.sql`** 전체 붙여넣고 **Run**.
   - 자세한 내용: `01-먼저-할-일.md` 5·6번.

---

## 🟡 3. 로그인·화면 확인

- **Admin:** `yeomjw0907@naver.com` + 비밀번호 → `/admin` 이동 확인.
- **테스트(클라이언트):** `test1@naver.com` + 비밀번호 → `/overview` 이동 확인.

---

## 🟢 4. Meta OAuth 연동 이어하기 (로그인 정리 후)

로그인과 프로필이 안정되면 데이터 연동을 진행합니다.

1. `npm run dev` → `http://localhost:3000`
2. 관리자 로그인 → **클라이언트** → 테스트 클라이언트(예: 성신컴퍼니) 선택
3. **데이터 연동** 탭 → **Meta OAuth** 클릭
4. App ID 입력 창이 뜨면 `.env.local`의 `META_APP_ID` 입력
5. Facebook **다시 연결** 후 돌아오면 **광고 계정 ID** 입력(예: `act_123456789`) → **연동 저장**
6. **🔄 수동 동기화**로 데이터 수집 테스트

자세한 순서·확인 사항: `10-Meta-OAuth-이어하기.md`

---

## 🔵 5. (선택) 플랫폼 연동 환경 점검

- `.env.local`에 플랫폼용 변수 있는지 확인:  
  `NEXT_PUBLIC_APP_URL`, `CRON_SECRET`, `META_APP_ID`, `META_APP_SECRET`, `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`, `GEMINI_API_KEY`  
  → `05-플랫폼-연동-셋업-가이드.md` 1절 참고.
- Supabase에 `001-add-contact-fields.sql` 등 마이그레이션 실행 여부 확인 → `05-플랫폼-연동-셋업-가이드.md` 2절.

---

## ⚙️ 참고: Windows EPERM 발생 시

`npm run dev` 시 **EPERM: operation not permitted, open '.next\trace'** 나오면:

- `npm run dev:safe` 또는 `npm run clean` 후 `npm run dev`
- 또는 `11-Windows-EPERM-트러블슈팅.md` 참고 (OneDrive 밖으로 프로젝트 이동 등).

---

## ✅ 오늘 할 일 체크리스트 요약

- [ ] **1-1** Supabase placeholder 콘솔 에러 해결 (client.ts / NEXT_PUBLIC_* 브라우저 전달)
- [ ] **1-2** 원마케팅SaaS 폴더에서 `npm run dev` 실행 (`.next` 있으면 삭제 후 재실행)
- [ ] **1-3** 로그인 시 Failed to fetch / your-project 오류 없음
- [ ] **2** Auth에 yeomjw0907@naver.com, test1@naver.com 사용자 생성 + `03-seed/profiles.sql` 실행
- [ ] **3** Admin·테스트 계정으로 로그인 및 화면 확인
- [ ] **4** (시간 되면) Meta OAuth → 광고 계정 ID 저장 → 수동 동기화 테스트
- [ ] **5** (선택) 플랫폼 연동 환경 변수·마이그레이션 점검
