# 서버비 시뮬레이션 (원마케팅 SaaS)

> Vercel + Supabase + (선택) Gemini·SOLAPI 기준 **월 예상 비용** 시뮬레이션입니다.  
> 요금제와 트래픽에 따라 달라지므로 참고용으로만 사용하세요.

---

## 1. 사용 중인 서비스 요약

| 서비스 | 용도 | 비고 |
|--------|------|------|
| **Vercel** | Next.js 호스팅, API 라우트, Cron | 무료/Pro |
| **Supabase** | DB, Auth, Storage | Free/Pro |
| **Gemini API** | AI 보고서 자동 생성 (cron) | 사용량 기반 |
| **SOLAPI** | 알림톡 발송 | 발송 건수 기반 (선택) |

---

## 2. Cron 실행량 (고정) — 권장: 일 1회 기준

| Cron | 스케줄 | 월 실행 횟수 (대략) |
|------|--------|---------------------|
| sync-metrics | 매일 1회 (UTC 21:00) | **30회** |
| aggregate-platform-metrics | 매일 1회 (10분 뒤) | **30회** |
| generate-report | 매주 월요일 1회 | **4회** |

- **Cron만** 해도 월 **약 64회** API 호출 (페이지/사용자 요청 제외).  
- 3시간마다로 올리면 월 약 484회가 됨 (필요 시 vercel.json 스케줄만 변경).

---

## 3. 시나리오별 월 예상 비용

### 시나리오 A: 초기/소규모 (무료 위주)

| 항목 | 가정 | 월 비용 (USD) |
|------|------|----------------|
| **Vercel** | Hobby(무료) 또는 Pro 무료 한도 내 | **$0** |
| **Supabase** | Free 티어 (500MB DB, 1GB 스토리지, 5GB egress) | **$0** |
| **Gemini API** | 보고서 4회/월, 소량 토큰 | **$0~1** |
| **SOLAPI** | 미사용 또는 무료 건수 내 | **$0** |
| **합계** | | **약 $0~1** |

- Vercel Hobby: 팀원 1명, 개인 프로젝트. **Cron은 Pro에서만** 동작하므로, Cron 쓰려면 Vercel **Pro ($20/월)** 필요.
- Supabase Free: 2개 프로젝트, 1주 비활성 시 pause 됨.

---

### 시나리오 B: 고객(클라이언트) 10명 — **가장 참고하기 좋은 기준**

| 항목 | 가정 | 월 비용 (USD) |
|------|------|----------------|
| **Vercel Pro** | 고정 | **$20** |
| **Vercel 함수** | Cron 64회 + 10사용자×월 500요청 ≈ 5천 회, 포함 한도 내 | **$0** |
| **Supabase Pro** | 10클라이언트, MAU 20~40명, DB·egress 여유 | **$25** |
| **Gemini API** | 주간 보고서 10명×주 1회 = 월 **40회** (gemini-1.5-flash) | **$2~5** |
| **SOLAPI** | 알림톡 미사용 시 $0 / 월 50건 가정 시 | **$0** 또는 **$5~10** |
| **합계** | 알림톡 없음 | **약 $47~50** |
| **합계** | 알림톡 50건/월 | **약 $52~60** |

- 관리자 1~2명 + 클라이언트당 1~2명 로그인 가정 → **MAU 20~40** 수준.
- Cron은 클라이언트 수와 무관하게 **일 1회**만 돌므로 64회/월 유지.
- AI 보고서는 **연동 있는 클라이언트만** 매주 1건씩 생성 → 10명이면 **월 40건**.
- **고객 10명일 때 서버비는 월 약 5만~7만 원($47~60)** 이라고 보면 됨.

---

### 시나리오 C: Pro 사용 (Cron + 상시 운영, 고객 수 미지정)

| 항목 | 가정 | 월 비용 (USD) |
|------|------|----------------|
| **Vercel Pro** | 고정 | **$20** |
| **Vercel 함수** | Cron 64회 + 사용자 요청 5만 회/월, 실행 시간 짧음 | **$0~5** (대부분 포함) |
| **Supabase Pro** | $25/월 (DB 8GB, 백업, 250GB egress) | **$25** |
| **Gemini API** | 보고서 4회/월, gemini-1.5-flash 소량 | **$0~2** |
| **SOLAPI** | 알림톡 100건/월 가정 | **약 $5~10** (요금제에 따름) |
| **합계** | | **약 $50~62** |

- Vercel Pro: 월 100만 Invocations 포함, 소규모면 초과 적음.
- Supabase Pro: 실서비스 권장. Free는 비활성 시 pause.

---

### 시나리오 D: 트래픽 보통 (MAU 500~1000)

| 항목 | 가정 | 월 비용 (USD) |
|------|------|----------------|
| **Vercel Pro** | | **$20** |
| **Vercel 함수** | 요청 30만~50만/월, CPU·메모리 소량 | **$5~15** |
| **Supabase Pro** | MAU 1000 이내, DB 8GB | **$25** |
| **Supabase 초과** | egress 250GB 초과 시 $0.09/GB | **$0~20** |
| **Gemini** | 보고서 20~50회/월 | **$2~5** |
| **SOLAPI** | 500건/월 | **$15~25** |
| **합계** | | **약 $67~110** |

---

## 4. 항목별 요약

### Vercel

- **Pro $20/월** 필수: Cron 사용 시 Pro 이상 필요 (Hobby는 Cron 미지원).
- 함수: Invocations 100만/월 포함, 초과 시 약 **$0.60/100만 회**.  
  Cron + 사용자 요청 합쳐 월 50만 회 미만이면 대부분 포함.
- 함수 실행 시간(CPU·메모리)은 사용량에 따라 추가 (보통 소규모면 수 달러 이내).

### Supabase

- **Free**: 개발/테스트용. 1주 비활성 시 pause.
- **Pro $25/월**: 상시 운영·백업 권장. DB 8GB, 250GB egress 포함.

### Gemini API (Google AI)

- **gemini-1.5-flash**: 상대적으로 저렴.  
  보고서 1회당 수백~수천 토큰 가정 시, 월 4~50회면 **$1~5** 수준 흔함.
- 정확한 비용은 [Google AI for Developers 요금](https://ai.google.dev/pricing) 참고.

### SOLAPI (알림톡)

- 건당 과금 또는 월 정액. 100건/월 수준이면 **$5~10**, 500건이면 **$15~25** 정도 가정.

---

## 5. 권장 조합

| 단계 | Vercel | Supabase | 예상 월 비용 (USD) |
|------|--------|----------|---------------------|
| **개발/테스트** | Hobby (Cron 없음) | Free | **$0** |
| **고객 10명** | Pro | Pro | **약 $47~60** |
| **Cron 포함 운영** | Pro | Free 또는 Pro | **$20~45** |
| **실서비스 안정** | Pro | Pro | **$45~65** |
| **트래픽·알림 증가** | Pro | Pro + 초과 egress | **$65~110** |

- **고객 10명**이면 **월 약 $47~60 (한화 약 6만~8만 원)** 이면 충분한 편.
- **Cron을 꼭 쓰는 경우**: Vercel **Pro ($20)** 는 사실상 필수.
- **DB 상시 운영**이면 Supabase **Pro ($25)** 권장.
- 서버비만 놓고 보면 **월 약 $50~70** 이면 Cron + DB + 소규모 트래픽까지 커버 가능한 구간입니다.

---

## 6. 비용 줄이기 팁

1. **Cron 주기**: 3시간 → 6시간·12시간으로 늘리면 호출 수 절반 이하로 감소.
2. **Supabase**: Free 사용 시 다른 서비스로 주기적 ping 해서 pause 방지 (또는 Pro로 전환).
3. **Gemini**: 보고서 생성 주기를 늘리거나, 클라이언트 수가 적으면 수동 생성만 사용.
4. **SOLAPI**: 알림톡 건수 최소화, 무료/저가 구간 확인.

---

*가격은 2024~2025년 기준이며, 각 서비스 정책 변경 시 달라질 수 있습니다. 실제 결제 전 해당 서비스 요금제를 확인하세요.*
