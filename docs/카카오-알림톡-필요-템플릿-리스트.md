# 카카오 알림톡 · 필요 템플릿 리스트

등록하기 전에 **어떤 템플릿이 왜 필요한지**만 먼저 정리한 문서입니다.  
내용·버튼 컨셉(무엇을 넣을지, 버튼은 뭐가 있는지)은 [카카오-알림톡-내용-버튼-컨셉.md](./카카오-알림톡-내용-버튼-컨셉.md)를 참고하세요.  
코드 기준으로 사용처를 적었고, 카카오/솔라피 등록 시 **템플릿 코드(ID)**는 아래와 **완전 동일**하게 써야 합니다.

---

## 1. 지금 앱에서 쓰는 템플릿 (필수 등록)

| # | 템플릿 ID | 용도 | 발송 시점 | 수신자 | 필요한 변수 |
|---|------------|------|-----------|--------|-------------|
| 1 | `TPL_report_published` | 보고서 발행 알림 | 보고서 발행 시 / 관리자 수동 발송 | 고객(광고주) | 고객명, 리포트제목, 링크 |
| 2 | `TPL_action_status` | 실행 항목 상태 변경 알림 | 상태 변경 시 / 관리자 수동 발송 | 고객 | 고객명, 작업명, 이전상태, 현재상태 |
| 3 | `TPL_event_reminder` | 일정 리마인더 | 일정 알림 시 / 관리자 수동 발송 | 고객 | 고객명, 일정명, 날짜 |
| 4 | `TPL_mon_review` | 지난주 성과 리뷰 | **매주 월요일** 자동 발송 (크론) | 고객 | 고객명, 요약, 자세히보기 |
| 5 | `TPL_wed_budget` | 이번 주 예산 페이싱 | **매주 수요일** 자동 발송 (크론) | 고객 | 고객명, 요약, 자세히보기 |
| 6 | `TPL_thu_proposal` | 다음 주 제안 + 승인 | **매주 목요일** 자동 발송 (크론) | 고객 | 고객명, 요약, 자세히보기, 승인하기 |
| 7 | `TPL_addon_order_admin` | 부가서비스 주문 접수 (관리자) | 고객이 부가서비스 주문 시 | **관리자** | 고객명, 서비스명, 금액, 링크 |
| 8 | `TPL_welcome` | 가입 승인 완료 (웰컴) | 관리자가 가입 승인 시 | 고객 | 고객명, 링크 |
| 9 | `TPL_addon_order_client` | 부가서비스 주문 접수 확인 (고객) | 고객이 부가서비스 주문 시 | 고객 | 고객명, 서비스명, 금액, 링크 |

→ 위 9개는 **반드시** 카카오 채널에 등록·승인해야 해당 기능이 동작합니다.

---

## 2. 코드에만 있고 아직 발송 안 하는 템플릿 (선택)

| # | 템플릿 ID | 용도 | 발송 시점 | 비고 |
|---|------------|------|-----------|------|
| 8 | `TPL_password_reset` | 비밀번호 재설정 안내 | (추후) 비밀번호 리셋 시 | 앱에서 아직 호출 없음. 나중에 비밀번호 리셋 플로우에 붙일 때 사용 |

→ 지금 당장 쓰지 않으면 **나중에** 등록해도 됩니다. 먼저 위 7개만 등록해도 됨.

---

## 3. 한 줄 요약

| 구분 | 개수 | 템플릿 ID |
|------|------|-----------|
| **필수** | 9개 | `TPL_welcome`, `TPL_report_published`, `TPL_action_status`, `TPL_event_reminder`, `TPL_mon_review`, `TPL_wed_budget`, `TPL_thu_proposal`, `TPL_addon_order_admin`, `TPL_addon_order_client` |
| **선택(추후)** | 1개 | `TPL_password_reset` |

---

## 4. 사용처 참고 (코드)

- **관리자 수동 발송**: `src/app/api/admin/notifications/send/route.ts`  
  → report_published, action_status, event_reminder (+ custom)
- **매주 월/수/목 자동 발송**: `src/app/api/cron/send-weekly-alimtalk/route.ts`  
  → mon_review, wed_budget, thu_proposal
- **부가서비스 주문 시**: `src/app/api/addon/order/route.ts`  
  → addon_order_admin (관리자), addon_order_client (고객)
- **가입 승인 시**: `src/app/admin/signups/actions.ts`  
  → welcome (고객에게 웰컴 알림)

이 리스트 확인한 뒤, **카카오-알림톡-템플릿-등록-예시.md** 에서 문구·변수 복사해서 등록하면 됩니다.
